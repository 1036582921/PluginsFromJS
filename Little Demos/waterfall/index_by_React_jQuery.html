<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="通过jQuery实现图片的瀑布流效果" />
    <title>WaterFall 瀑布流</title>
    <script src="../../React/js/react.js"></script>
    <script src="../../React/js/react-dom.js"></script>
    <script src="../../React/js/browser.min.js"></script>
    <script src="../js/jquery-3.1.1.min.js"></script>
    <link rel="stylesheet" href="../css/index_by_React_jQuery.css">
</head>
<body>
<div id="container">
</div>
<script type="text/babel">
    var WaterfallPictrues = React.createClass({
        getInitialState:function () {
            return{
                pics:null
            };
        },
        componentDidMount:function () {
            $.get(this.props.url,function (data) {
                if(this.isMounted()){
                    var arr = $(data).find('string');
                    var myPics = new Array()
                    for (var i = 0; i < arr.length; i++) {
                        myPics[i] = arr[i].innerHTML;
                    }
                    this.setState({
                        pics:myPics
                    });
                }
            }.bind(this));
        },
        render:function () {
            if(this.state.pics!==null){
                var picList = this.state.pics.map(function (pic,i) {
                    return (
                            <div className="box"  key={i}>
                                <div className="content" >
                                    <img src={pic}/>
                                </div>
                            </div>
                    );
                });
                return (
                    <div>{picList}</div>
                );
            }else {
                return <p>Error</p>
            }
        }
    });
    ReactDOM.render(
        <WaterfallPictrues url="http://www.ycdoit.com/api/Web4Luka.asmx/GetGirlsPirtures"/>,
        document.getElementById('container')
    );
</script>

<script src="../js/index_by_React_jQuery.js"></script>
</body>